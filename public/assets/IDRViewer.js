var IDRViewer=function(){var x={},g=1,y=0,E=0,Ma,d=0,p=0,l,m,u,h,ka,Z=[],k,F,G=!1,n=!1,J,la,aa,ya=!1,za,Aa,v,ma=[],Na=0,Oa="index",r=0,t=0,Pa,da=!0,z,B,na,ba,U,oa,Ba,K,O,X,Y,H,pa,qa,ra,sa,ea,fa,L,A,C,ga,ta;la=/iPhone|iPad|iPod/i.test(navigator.userAgent);aa=J&&window.requestAnimationFrame&&"undefined"===typeof InstallTrigger;m=f("contentContainer");u=f("mainContent"); F=f("left");p=a;d=b;y=c;Ma=E=e;h=Va;Pa=t;f("pgCount").innerHTML="/"+p;m.style.width=y+"px";m.style.height=E+"px";z=f("goBtn");B=f("zoomBtn");na=f("btnFullscreen");ba=f("btnOutlines");U=f("btnThumbnails");oa=f("btnPrev");Ba=f("btnNext");K=f("btnMove");O=f("btnSelect");X=f("btnZoomIn");Y=f("btnZoomOut");fa=0;L=1;A=2;C=3;ga=0;ta=1;H=0;pa=1;qa=2;ra=3;sa=4;v=ea=5;if(h===C)l=f("jpedal");else if(h===fa)l=f("jpedal"),ua();else if(h===L)l=f("container"+b),Ca();else if(h===A)for(l=f("jpedal"),1<a&&scrollEv(null), ua(),a=1;a<=p;a++)aa?f("page"+a).style.margin="0 0 10px":f("page"+a).style.margin=a!==p?"0 auto 10px":"0 auto",c=f("page"+a),c.clientWidth!=y&&(da=!1),Z[a]={width:c.clientWidth,height:c.clientHeight};document.fullscreenEnabled||document.msFullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled?(ia("fullscreenchange",document,va),ia("MSFullscreenChange",document,va),ia("mozfullscreenchange",document,va),ia("webkitfullscreenchange",document,va)):na.parentNode.removeChild(na); k=document.getElementById("leftContent");Wa(ha);for(a=0;a<p;a++)ma[a]=!1;b=f("thumb"+b);b.className="thumbnail currentPageThumbnail";k.scrollTop=b.getBoundingClientRect().top-80;n=G=!1;"thumbnails"===wa("sidebar")?(G=!0,n=!1):"outlines"===wa("sidebar")&&(n=G=!0,U.className="navBtn");G&&(D.applyTransformOrigin(F,"0ms"),F.style.width="200px",F.style.left="0",F.offsetLeft,D.applyTransitionDuration(F,"200ms"),Da(-1));n&&(f("thumbnailPanel").style.display="none",f("outlinePanel").style.display="inline"); b="pan"===wa("mode")?ta:ga;this.setSelectMode(b);ia("scroll",k,Qa);b=document.createElement("script");b.setAttribute("src","bookmarks/bookmarks.js");b.setAttribute("onload","IDRViewer.setBookmarks(bookmarks);");b.onreadystatechange=function(){"complete"==this.readyState&&IDRViewer.setBookmarks(bookmarks)};(document.head||document.getElementsByTagName("head")[0]).appendChild(b);J&&(B.parentNode.removeChild(B),K.parentNode.removeChild(K),O.parentNode.removeChild(O));if(J||h!==C)if(h===C){X.parentNode.removeChild(X); Y.parentNode.removeChild(Y);u.style.overflow="hidden";P.setup(q);var r=window.innerWidth,x=window.innerHeight;b=function(){setTimeout(function(){if(r!==window.innerWidth||x!==window.innerHeight)m.innerHTML="",g=1,r=window.innerWidth,x=window.innerHeight,P.setup(q)},300)};window.onorientationchange=b;window.onresize=b}else{aa||(b=wa("zoom"),ha=parseFloat(b),"width"==b?v=qa:"height"==b?v=ra:"page"==b?v=sa:"actual"==b?v=pa:!isNaN(ha)&&0<ha?(v=H,g=ha):v=ea,B.selectedIndex=v,Q(),da||(B.remove(5),B.remove(4), B.remove(3),B.remove(2),u.scrollLeft=(m.offsetWidth-u.offsetWidth)/2),window.onresize=Q);1===d&&(oa.className="inactive navBtn");if(d===p||h===L&&1===p%2&&d+1===p)Ba.className="inactive navBtn";D.applyTransformOrigin(l,"top left");l.style.margin="0";aa&&Xa.setupTouchEvents()}else{for(a=0;a<p;a++)if(q[a][0]!=q[0][0]||q[a][1]!=q[0][1]){da=!1;break}da?(Ca(),Ra.setup()):(ua(),Sa.setup(q));v=ea;B.selectedIndex=v}};var Ca=function(){z.style.width="65px";z.innerHTML="";var a=document.createElement("option"); a.value=1;a.innerHTML="1";z.appendChild(a);for(var b,c=2;c<=p;c+=2)a=document.createElement("option"),a.value=c,b=c!==p||1===p%2?String(c+"-"+(c+1)):String(c),a.innerHTML=b,z.appendChild(a);z.selectedIndex=d/2},ua=function(){z.innerHTML="";for(var a=1;a<=p;a++){var b=document.createElement("option");b.value=a;b.innerHTML=String(a);z.appendChild(b)}z.selectedIndex=d-1},D={applyTransform:function(a,b){a.style.webkitTransform=b;a.style.mozTransform=b;a.style.msTransform=b;a.style.oTransform=b;a.style.transform= b},applyTransformOrigin:function(a,b){a.style.webkitTransformOrigin=b;a.style.mozTransformOrigin=b;a.style.msTransformOrigin=b;a.style.oTransformOrigin=b;a.style.transformOrigin=b},applyTransitionDuration:function(a,b){a.style.webkitTransitionDuration=b;a.style.mozTransitionDuration=b;a.style.msTransitionDuration=b;a.style.oTransitionDuration=b;a.style.transitionDuration=b}},Ra=function(){var a={},b;a.setup=function(){ka=h;h=L;b=y;-1<window.location.hash.indexOf("page=")&&(d=parseInt(window.location.hash.substr(6))); a.goToPage(d)};a.goToPage=function(a){m.children[0].parentNode.removeChild(m.children[0]);d=a;1!==d&&0!==d%2&&--d;y=b;1<d&&(y*=2);m.style.width=y+"px";a="container"+d;z.selectedIndex=d/2;window.location.hash="page="+d;l=document.createElement("div");l.id=a;l.style.width=y+"px";m.appendChild(l);D.applyTransformOrigin(l,"top left");l.style.margin="0";Q();$.ajax({url:d+".html",success:function(a){a=$("<div />").html(a).find("#jpedal").attr("id","page"+d).css({position:"absolute"});$(l).append(a);setTimeout(function(){window["load"+ d]();if("file:"==window.location.protocol){var a=f("fonts"+d),b=document.createElement("style");b.setAttribute("type","text/css");b.innerHTML=a.innerHTML;l.appendChild(b)}},1)},error:function(){var a=document.createElement("iframe");a.setAttribute("src",d+".html");a.setAttribute("style","width: "+b+"px; height: "+E+"px; position: absolute; border: 0;");l.appendChild(a)}});1!=d&&d!=p&&$.ajax({url:d+1+".html",success:function(a){a=$("<div />").html(a).find("#jpedal").attr("id","page"+(d+1)).css({position:"absolute", left:b});$(l).append(a);setTimeout(function(){window["load"+(d+1)]();if("file:"==window.location.protocol){var a=f("fonts"+(d+1)),b=document.createElement("style");b.setAttribute("type","text/css");b.innerHTML=a.innerHTML;l.appendChild(b)}},1)},error:function(){var a=document.createElement("iframe");a.setAttribute("src",d+1+".html");a.setAttribute("style","width: "+b+"px; height: "+E+"px; position: absolute; border: 0; left: "+b+"px;");l.appendChild(a)}})};return a}(),Sa=function(){var a={},b;a.setup= function(c){b=c;ka=h;h=fa;-1<window.location.hash.indexOf("page=")&&(d=parseInt(window.location.hash.substr(6)));a.goToPage(d)};a.goToPage=function(a){m.children[0].parentNode.removeChild(m.children[0]);d=a;y=b[d-1][0];E=b[d-1][1];m.style.width=y+"px";m.style.height=E+"px";z.selectedIndex=d-1;window.location.hash="page="+d;$.ajax({url:d+".html",success:function(a){a=$("<div />").html(a).find("#jpedal").css({margin:"0",overflow:"hidden",position:"relative"});$(m).append(a);D.applyTransformOrigin(l, "top left");Q();setTimeout(function(){window["load"+d]();if("file:"==window.location.protocol){var a=f("fonts"+d),b=document.createElement("style");b.setAttribute("type","text/css");b.innerHTML=a.innerHTML;a.parentNode.removeChild(a);f("jpedal").appendChild(b)}},1)},error:function(){l=document.createElement("iframe");l.setAttribute("id","jpedal");l.setAttribute("src",d+".html");l.setAttribute("style","width: "+y+"px; height: "+E+"px; position: relative; border: 0;");m.appendChild(l);D.applyTransformOrigin(l, "top left");Q()}})};return a}(),P=function(){var a={},b=[],c=[],e=[],l,t,r,q=0,h=0,x,v,Ea=0,Fa,F,k,n,w,B=!1,R;a.updateCurrentPage=function(){window.location.hash="page="+d;z.selectedIndex=w?Math.floor(d/2):d-1};a.next=function(){this.goToPage(w?d+2:d+1,!0)};a.prev=function(){this.goToPage(d-1,!0)};a.setup=function(ja){R=ja;m.removeAttribute("style");m.style.overflow="visible";m.style.padding="0";m.style.margin="0";m.style.webkitBackfaceVisibility="hidden";m.style.webkitPerspective="1000";B||(u.addEventListener("touchstart", Z),u.addEventListener("touchmove",aa),u.addEventListener("touchend",ba),B=!0);w=window.innerWidth>window.innerHeight;da||(w=!1);w?Ca():ua();-1<window.location.hash.indexOf("page=")&&(d=parseInt(window.location.hash.substr(6)));for(ja=1;ja<=p;ja++)b[ja]=!1;setTimeout(function(){a.goToPage(d,!1)},0)};var E=!1,G=!1,ca,A,S=!1,T,C,H,L,Ga,I,M,N,Ha,Ia,Ja,xa,V,W,J,P,Q,Z=function(a){Fa=E=!1;1!==a.touches.length||S||1!==g||(A=a.touches[0].clientX,C=a.touches[0].clientX,H=a.touches[0].clientY,L=C,Ga=H,E=!0, T=Date.now());J&&(P=!0);1===a.touches.length&&1<g&&(F=a.touches[0].clientX,k=a.touches[0].clientY,n=!0,I=h,M=q,N=I,Ha=M,Ia=Date.now(),Ja=Date.now(),xa||(xa=setInterval(function(){I=N;M=Ha;N=h;Ha=q;Ja=Ia;Ia=Date.now()},200)));if(2===a.touches.length&&!G){Fa=!0;n=!1;Y(d);var b=a.touches[0].clientX-l,c=a.touches[1].clientX-l,e=a.touches[0].clientY;a=a.touches[1].clientY;r=Math.sqrt(Math.pow(Math.abs(b-c),2)+Math.pow(Math.abs(e-a),2));x=b-(b-c)/2;v=e-(e-a)/2}},aa=function(a){a.preventDefault();a.stopPropagation(); if(1===a.touches.length&&E&&1===g){G=!0;var b=A-a.touches[0].clientX;0!==b&&(A=a.touches[0].clientX,L=a.touches[0].clientX,Ga=a.touches[0].clientY,ca-=b,D.applyTransform(m,"translate3d("+ca+"px, 0, 0)"))}else if(1===a.touches.length&&n){Q=!0;b=a.touches[0].clientX;a=a.touches[0].clientY;var c=a-k;h+=b-F;q+=c;F=b;k=a;K();requestAnimationFrame(function(){O(h,q,g,!0)},f("main"))}else if(2===a.touches.length&&!S&&a.cancelable&&Fa&&!G&&(Ea=(Ea+1)%2,1!==Ea)){var d=a.touches[0].clientX-l,e=a.touches[1].clientX- l,c=a.touches[0].clientY,M=a.touches[1].clientY;a=Math.sqrt(Math.pow(Math.abs(d-e),2)+Math.pow(Math.abs(c-M),2));b=a/r;1>g*b&&(g=b=1);4<g*b&&(b=1);g*=b;d-=(d-e)/2;c-=(c-M)/2;h=h+d-x;q=q+c-v;e=-h+d;h-=e*b-e;e=-q+c;q-=e*b-e;K();x=d;v=c;requestAnimationFrame(function(){O(h,q,g,!0)},f("main"));r=a}},ba=function(b){var c;if(0===b.touches.length){if(G){var e=G=!1;300>Date.now()-T&&(b=C-L,c=H-Ga,100<Math.abs(b)&&Math.abs(b)>.25*Math.abs(c)&&(e=!0,0<b?a.next():a.prev()));e||(b=-window.innerWidth*(d-1),w&& (b=-window.innerWidth*Math.floor(d/2)),ca>b+window.innerWidth/2?a.prev():ca<b-window.innerWidth/2?a.next():a.goToPage(d,!0))}clearInterval(xa);xa=null;Q&&(Q=!1,e=Date.now()-Ja,b=I-h,c=M-q,V=b/(e/16),W=c/(e/16),.5>Math.abs(V)&&(V=0),.5>Math.abs(W)&&(W=0),0===V&&0===W||window.requestAnimationFrame(U,f("main")))}},U=function(){J=!0;!P&&(-.5>V||.5<V||-.5>W||.5<W)?(h-=V,q-=W,V*=.95,W*=.95,K(),O(h,q,g,!0),window.requestAnimationFrame(U,f("main"))):P=J=!1},K=function(){0<h&&(V=h=0);0<q&&(W=q=0);var a=R[d- 1][0]*e[d];w&&(a*=2);var b=a*g;h<a-b&&(h=a-b,V=0);a=R[d-1][1]*e[d];b=a*g;q<a-b&&(q=a-b,W=0)},O=function(a,b,g,M){a=Math.round(2*a)/2;b=Math.round(2*b)/2;a=M?"translate3d("+(a+c[d])+"px, "+b+"px, 0) scale("+g*e[d]+")":"translateX("+(a+c[d])+"px) translateY("+b+"px) scale("+g*e[d]+")";b=f("page"+d);D.applyTransform(b,a)},X=function(a){if(!b[a]){var d=document.createElement("div");d.setAttribute("id","page"+a);d.style.width=w&&1!=a&&(a<p||1===p%2)?2*y+"px":R[a-1][0]+"px";d.style.height=R[a-1][1]+"px"; Y(a);c[a]=w&&1!=a?window.innerWidth*Math.floor(a/2)+l:window.innerWidth*(a-1)+l;D.applyTransform(d,"translate3d("+c[a]+"px, 0, 0) scale("+e[a]+")");D.applyTransformOrigin(d,"top left");d.style.marginTop=t+"px";d.style.position="absolute";m.appendChild(d)}b[a]||$.ajax({url:a+".html",success:function(c){b[a]||(b[a]=!0,c=$("<div />").html(c).find("#jpedal").attr("id","pg"+a).css("position","absolute"),$("#page"+a).append(c),setTimeout(function(){window["load"+a]()},1))}});w&&1!=a&&!b[a+1]&&a!=p&&$.ajax({url:a+ 1+".html",success:function(c){b[a+1]||(b[a+1]=!0,c=$("<div />").html(c).find("#jpedal").attr("id","pg"+(a-1)).css("position","absolute"),(a<p||1===p%2)&&c.css("left",y),$("#page"+a).append(c),setTimeout(function(){window["load"+(a+1)]()},1))}})},Y=function(a){var b;b=w&&1!=a&&(a<p||1===p%2)?(window.innerWidth-20)/(2*y):(window.innerWidth-20)/R[a-1][0];var c=(window.innerHeight-40-20)/R[a-1][1];b<c?(e[a]=b,l=10):(e[a]=c,l=(window.innerWidth-20-(w&&1!=a&&(a<p||1===p%2)?2*y*e[a]:R[a-1][0]*e[a]))/2+10); return t=(window.innerHeight-40-R[a-1][1]*e[a])/2};a.goToPage=function(c,e){if(1<g)g=1,requestAnimationFrame(function(){O(0,0,g,!0);a.goToPage(c,e)},f("main"));else{S=!0;0>=c&&(c=parseInt(z.options[z.selectedIndex].value));w&&1!==c&&1===c%2&&--c;c>p&&(c=p);Y(c);b[c]||X(c);ca=w?-(window.innerWidth*Math.floor(c/2)):-(window.innerWidth*(c-1));e&&D.applyTransitionDuration(m,"200ms");D.applyTransform(m,"translate3d("+ca+"px, 0, 0)");var M=function(){var a;w&&1!==c&&1===c%2&&--c;d=c;S=!1;a=c;w&&1===a&& (a=0);var e=a-1,g=a+1;w&&(--e,g+=1,2===a&&(e=1));1<=e&&!b[e]&&X(e);g<=p&&!b[g]&&X(g);D.applyTransitionDuration(m,"");m.removeEventListener("transitionend",M,!1);m.removeEventListener("webkitTransitionEnd",M,!1);IDRViewer.updateCurrentPage();if(w)for(e=2;e<=p;e+=2)b[e]&&(e<d-2||e>d+2)&&(b[e]=!1,a=f("page"+e),a.parentNode.removeChild(a),e<p&&(b[e+1]=!1));else for(e=1;e<=p;e++)b[e]&&(e<d-1||e>d+1)&&(b[e]=!1,a=f("page"+e),a.parentNode.removeChild(a))};e?(m.addEventListener("transitionend",M,!1),m.addEventListener("webkitTransitionEnd", M,!1)):M()}};return a}();x.setBookmarks=function(a){f("leftContent").style.top="40px";f("leftNav").style.display="block";Ta(f("outlinePanel"),a);n?U.className="navBtn":ba.className="navBtn"};var Ta=function(a,b){for(var c=document.createElement("ul"),e=0;e<b.length;e++)(function(){var a=b[e],d=document.createElement("li");d.setAttribute("title","Page "+a.page);d.innerHTML=a.title;d.onclick=function(){IDRViewer.goToPage(a.page)};c.appendChild(d);"undefined"!=typeof a.children&&Ta(c,a.children)})(); a.appendChild(c)};x.setFirstPageName=function(a){Oa=a};var wa=function(a){for(var b=document.URL,c=b.toString().indexOf("?"),b=-1!=c?b.substr(c+1).split("&"):"",c=0;c<b.length;c++)if(b[c]=b[c].split("="),b[c][0]==a)return b[c][1];return""};x.toggleOutlines=function(a){n&&!a?(f("thumbnailPanel").style.display="inline",f("outlinePanel").style.display="none",k.scrollTop=f("thumb"+d).getBoundingClientRect().top-80,n=!n,U.className="inactive navBtn",ba.className="navBtn"):a&&"inactive navBtn"!=ba.className&& (f("thumbnailPanel").style.display="none",f("outlinePanel").style.display="inline",n=!n,U.className="navBtn",ba.className="inactive navBtn")};var Wa=function(a){for(var b,c=0,e=0,d=1;d<=p;d++){0>a[e]&&0>=c?(c=Math.abs(a[e])-1,e++):0<c?c--:(b=a[e],e++);var g=document.createElement("div");g.style.height=b+"px";g.className="thumbnail";g.id="thumb"+d;g.setAttribute("onclick","IDRViewer.goToPage("+d+");");g.setAttribute("title","Page "+d);g.innerHTML='<img src="assets/loading.gif"/>';k.children[0].appendChild(g)}}, Qa=function(a){var b=k.scrollTop;Na=b;setTimeout(function(){Da(b)},500)},Da=function(a){if(a==Na||-1==a)for(a=0;a<p;a++)if(!ma[a]){var b=k.children[0].children[a];if(b.offsetTop>k.scrollTop+k.clientHeight)break;b.offsetTop+b.clientHeight>k.scrollTop&&(b=a,ma[b]||(k.children[0].children[b].children[0].setAttribute("src","thumbnails/"+(b+1)+Pa),ma[b]=!0))}},Ka=function(){var a={};a.currentSelectMode=ga;a.enableTextSelection=function(){this.currentSelectMode=ga;O.className="inactive navBtn";K.className= "navBtn";m.style.cursor=b(0);var a=function(a){};m.onmousedown=a;document.body.onmouseup=a;document.body.onmousemove=a};a.enablePanning=function(){this.currentSelectMode=ta;O.className="navBtn";K.className="inactive navBtn";window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty();m.style.cursor=b(1);m.onmousedown=function(a){a=a||window.event;m.style.cursor= b(2);za=a.clientX;Aa=a.clientY;ya=!0;return!1};document.body.onmouseup=function(a){m.style.cursor=b(1);ya=!1};document.body.onmousemove=function(a){if(ya)return a=a||window.event,u.scrollLeft=u.scrollLeft+za-a.clientX,u.scrollTop=u.scrollTop+Aa-a.clientY,za=a.clientX,Aa=a.clientY,!1}};var b=function(a){var b=!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),b=!!window.chrome&&!b;return"undefined"!==typeof InstallTrigger?0==a?"":1==a?"-moz-grab":"-moz-grabbing":b?0==a?"":1==a?"-webkit-grab": "-webkit-grabbing":0==a?"":"all-scroll"};return a}();x.setSelectMode=function(a){J||(a==ga?Ka.enableTextSelection():Ka.enablePanning())};var Ya=function(){var a=0;self.innerHeight?a=self.innerWidth:document.documentElement&&document.documentElement.clientHeight?a=document.documentElement.clientWidth:document.body&&(a=document.body.clientWidth);return a},Ua=function(a,b,c,d){D.applyTransform(l,d?"translate3d("+a+"px, "+b+"px, 0) scale("+c+")":"translateX("+a+"px) translateY("+b+"px) scale("+c+")"); h===A&&scrollEv()},La=function(){var a=u.scrollTop,b=m.offsetHeight;v===H&&(B.selectedIndex=H);4<g?g=4:.25>g&&(g=.25);"undefinded"!==typeof isIE&&isIE&&(l.style.zoom=g);Ua(0,0,g,!1);m.style.width=y*g+"px";m.style.height=E*g+"px";var c=Math.floor(100*g);J||(B.options[0].innerHTML=c+"%");h==A&&(l.style.width=Math.floor(100/c*100)+"%");u.scrollTop=m.offsetHeight/b*a};x.zoomIn=function(){v=H;g*=1.2;La()};x.zoomUpdate=function(){v=B.selectedIndex;v!=H&&Q()};var Q=function(){var a,b,c,e,f;b=function(){a= u.clientWidth;h===A&&(y=Z[d].width);g=(a-6)/y};switch(v){case ea:y>Ya()&&da?b():g=1;break;case qa:b();break;case ra:b=u.clientHeight;c=(b-6)/E;h==A&&(f=Z[d].height,c=(b-6)/f);g=c;break;case sa:a=u.clientWidth;b=u.clientHeight;h==A&&(y=Z[d].width,f=Z[d].height);e=(a-6)/y;c=(b-6)/E;h==A&&(c=(b-6)/f);g=e>c?c:e;break;case pa:g=1}La()};x.zoomOut=function(){v=H;g/=1.2;La()};x.goToPage=function(a){if(h===C)P.goToPage(a,!1);else if(ka===C&&h===L)Ra.goToPage(a);else if(ka===C&&h===fa)Sa.goToPage(a);else{var b; 0===a&&(a=parseInt(z.options[z.selectedIndex].value));if(a!==d){var c=[];if(v!=ea){var e;switch(v){case qa:e="width";break;case ra:e="height";break;case sa:e="page";break;case H:e=g;break;case pa:e="actual"}c[c.length]="zoom="+e}G&&!n&&(c[c.length]="sidebar=thumbnails");G&&n&&(c[c.length]="sidebar=outlines");Ka.currentSelectMode==ta&&(c[c.length]="mode=pan");e="?";for(b=0;b<c.length;b++)0<b&&(e+="&"),e+=c[b];1==e.length&&(e="");h===fa?(a=I(a,p),window.open(a+".html"+e,"_self")):h==L?(a=Za(a,p),window.open(a+ ".html"+e,"_self")):h==A&&(aa?(D.applyTransitionDuration(l,"200ms"),t=t-f("page"+a).getBoundingClientRect().top+40,Ua(r,t,g,!1),setTimeout(function(){D.applyTransitionDuration(l,"");x.updateCurrentPage()},200)):(u.scrollTop=u.scrollTop+f("page"+a).getBoundingClientRect().top-45,x.updateCurrentPage()))}}};x.updateCurrentPage=function(){if(h===C)P.updateCurrentPage();else if(0<f("page1").getBoundingClientRect().top)d=1,z.selectedIndex=d-1;else for(var a=1;a<=p;a++){var b=f("page"+a).getBoundingClientRect(), c=b.top,b=b.bottom-b.top;if(c<=.25*b&&c>.5*-b){d=a;z.selectedIndex=d-1;break}}oa.className=1===d?"inactive navBtn":"navBtn";Ba.className=d===p?"inactive navBtn":"navBtn";c=f("thumb"+d);if("thumbnail currentPageThumbnail"!=c.className){for(a=1;a<=p;a++)f("thumb"+a).className="thumbnail";c.className="thumbnail currentPageThumbnail";k.scrollTop=k.scrollTop+c.getBoundingClientRect().top-80}};var I=function(a,b){var c=a.toString(),d=b.toString().length-c.length;if(1===a)c=Oa;else for(var g=0;g<d;g++)c= "0"+c;return c},Za=function(a,b){a>b&&(a=b);return 1===a?I(a,b):0===a%2?a===b?I(a,b):I(a,b)+"-"+I(a+1,b):I(a-1,b)+"-"+I(a,b)};x.next=function(){h===C?P.next():h===L?d+1<p&&this.goToPage(d+2):d<p&&this.goToPage(d+1)};x.prev=function(){h===C?P.prev():1<d&&this.goToPage(d-1)};var ia=function(a,b,c){if(b.addEventListener)b.addEventListener(a,c,!1);else if(b.attachEvent)return b.attachEvent("on"+a,c)},f=function(a){return document.getElementById(a)};x.toggleThumbnails=function(){G?(F.style.width="0",F.style.left= "-20px"):(Da(-1),F.style.width="200px",F.style.left="0",Qa());G=!G};var va=function(){na.className=document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?"navBtn open":"navBtn closed"};x.toggleFullScreen=function(){document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen(): document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():document.body.requestFullscreen?document.body.requestFullscreen():document.body.msRequestFullscreen?document.body.msRequestFullscreen():document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.webkitRequestFullscreen&&document.body.webkitRequestFullscreen()};x.addToolBarHyperlink=function(a,b){var c=new Image;c.src=a;var d=document.createElement("a"); d.href=b;d.className="customNavLink";d.appendChild(c);d.setAttribute("target","_blank");f("mainNav").insertBefore(d,oa)};var Xa=function(){var a=function(a,c,d,g){D.applyTransform(l,g?"translate3d("+a+"px, "+c+"px, 0) scale("+d+")":"translateX("+a+"px) translateY("+c+"px) scale("+d+")");h===A&&scrollEv()};return{setupTouchEvents:function(){X.parentNode.removeChild(X);Y.parentNode.removeChild(Y);f("contentContainer").style.width="100%";f("contentContainer").style.height="100%";f("contentContainer").style.padding= "0";S=g=window.innerWidth/y;la?setTimeout(function(){a(0,0,g,!1)},0):setTimeout(function(){a(0,0,g,!0);l.style.webkitBackfaceVisibility="hidden"},0);var b,c,d,h,m,p,q=0,x,v=0,z,k,n,B,E,A,w,C,R,H,I,L,J,S,T=function(a){return Math.round(2*a)/2},O=function(){E=!0;v++;if(!A&&(-.5>k||.5<k||-.5>n||.5<n))r-=k,t-=n,k*=.95,n*=.95,K(),a(T(r),T(t),g,!0),window.requestAnimationFrame(O,l);else{E=!1;if(!A){var b=v;setTimeout(function(){v===b&&P()},200)}A=!1}},P=function(){z=!1;F.style.zIndex="5";l.style.webkitBackfaceVisibility= "";requestAnimationFrame(function(){a(T(r),T(t),g,!1)},l);if(!la){var b=v;setTimeout(function(){l.style.webkitBackfaceVisibility="hidden";v===b&&(a(T(r),T(t),g,!0),G&&(F.style.zIndex="10"))},200)}},Q=function(a){clearInterval(J);J=null;v++;if(z){var b=v;setTimeout(function(){v===b&&P()},200)}if(B){B=!1;a=Date.now()-I;var c=C-t;k=(w-r)/(a/16);n=c/(a/16);.5>Math.abs(k)&&(k=0);.5>Math.abs(n)&&(n=0);0===k&&0===n||window.requestAnimationFrame(O,l)}},K=function(){0<r&&(k=r=0);0<t&&(n=t=0);var a=y*g;r+a< window.innerWidth&&(r=a>window.innerWidth?window.innerWidth-a:0,k=0);a=Ma*g;40+t+a<window.innerHeight&&(t=a>window.innerHeight-40?window.innerHeight-a-40:0,n=0)};u.addEventListener("touchstart",function(f){v++;E&&(A=!0);Date.now();if(2===f.touches.length){var N=f.touches[0].clientX,q=f.touches[1].clientX,k=f.touches[0].clientY,n=f.touches[1].clientY;h=Math.sqrt(Math.pow(Math.abs(N-q),2)+Math.pow(Math.abs(k-n),2));m=N-(N-q)/2;p=k-(k-n)/2}1==f.touches.length&&(N=(new Date).getTime(),b=b||N+1,q=N-b, k=Math.abs(c-f.touches[0].clientX),n=Math.abs(d-f.touches[0].clientY),500>q&&0<q&&50>k&&50>n?(N=g>S?S/g:2*S/g,k=window.innerWidth/2,q=40+(window.innerHeight-40)/2,r+=k-c,t+=q-d,k=-r+k,r-=k*N-k,q=-t+q,t-=q*N-q,g*=N,K(),D.applyTransitionDuration(l,"200ms"),a(r,t,g,!1),setTimeout(function(){D.applyTransitionDuration(l,"")},200),b=0):b=N,c=f.touches[0].clientX,d=f.touches[0].clientY,x=!0);w=r;C=t;R=w;H=C;L=Date.now();I=Date.now();J||(J=setInterval(function(){w=R;C=H;R=r;H=t;I=L;L=Date.now()},200))}); u.addEventListener("touchend",Q);u.addEventListener("touchcancel",function(a){Q(null)});u.addEventListener("touchmove",function(f){v++;f.preventDefault();f.stopPropagation();b=0;B=!1;if(1===f.touches.length&&x){la&&(z=!0);B=!0;var k=f.touches[0].clientX,n=f.touches[0].clientY,u=n-d;r+=k-c;t+=u;c=k;d=n;K();requestAnimationFrame(function(){a(T(r),T(t),g,!0)},l)}if(2===f.touches.length&&(x=!1,q=(q+1)%2,1===q)){z=!0;var u=f.touches[0].clientX,w=f.touches[1].clientX,n=f.touches[0].clientY,A=f.touches[1].clientY; f=Math.sqrt(Math.pow(Math.abs(u-w),2)+Math.pow(Math.abs(n-A),2));k=f/h;1>k&&y*g*k<window.innerWidth&&(k=1,g=S);4<g*k&&(k=1);g*=k;u-=(u-w)/2;n-=(n-A)/2;r=r+u-m;t=t+n-p;w=-r+u;r-=w*k-w;w=-t+n;t-=w*k-w;K();m=u;p=n;requestAnimationFrame(function(){a(T(r),T(t),g,!0)},l);h=f}});window.onorientationchange=function(){setTimeout(function(){S=window.innerWidth/y;g<=S&&(g=S);K();a(r,t,g,!1)},300)};var U=function(){var a={},b=!1,c,d;a.touchStart=function(a){1===a.touches.length?(c=a.touches[0].clientX,d=a.touches[0].clientY, b=!0):b=!1};a.touchMove=function(a){if(b){var e=c-a.touches[0].clientX;50<Math.abs(d-a.touches[0].clientY)?b=!1:100<e&&(b=!1,IDRViewer.toggleThumbnails())}};return a}();F.addEventListener("touchstart",U.touchStart);F.addEventListener("touchmove",U.touchMove)}}}();return x}();intLoaded?idrLoad():extLoaded=!0;